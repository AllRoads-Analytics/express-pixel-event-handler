// AllRoads Analytics (allroadsanalytics.com)
!function(o,u,i,a){"use strict";function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function n(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?t(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}var g={id:"",params:{},version:2,follow:!1},h=function(){function i(){l(this,i)}return m(i,null,[{key:"isPresent",value:function(e){return null!=e&&""!==e}},{key:"now",value:function(){return+new Date}},{key:"addMinutesToDate",value:function(e,t){e.setTime(e.getTime()+1e3*t*60)}},{key:"guid",value:function(){var e,t,n,r=null,o=v.getParameterByName(a+"_follow");try{!i.isPresent(o)||2===(e=o.split(".")).length&&(t=new Date(parseInt(e[1])),n=new Date,t.setTime(t.getTime()+3e5),console.log({now:n,paramDate:t}),!isNaN(t.getTime())&&n.getTime()<t.getTime()&&(r=e[0]))}catch(e){}return r=r||(p.exists("uid")?p.get("uid"):g.version+"-xxxxxxxx-".replace(/[x]/g,function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)})+(+new Date).toString(36))}},{key:"optionalData",value:function(e){return!1===i.isPresent(e)?"":"object"===r(e)?i.optionalData(JSON.stringify(e)):"function"==typeof e?i.optionalData(e()):String(e)}},{key:"addFollowParam",value:function(e){if(g.follow)try{var t=new URL(e.href);t.searchParams.set(a+"_follow",b+"."+(new Date).getTime()),e.href=t.href}catch(e){}}}]),i}(),d=function(){function e(){l(this,e)}return m(e,null,[{key:"nameAndVersion",value:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in o||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}},{key:"userAgent",value:function(){return o.navigator.userAgent}}]),e}(),p=function(){function e(){l(this,e)}return m(e,null,[{key:"prefix",value:function(){return"__".concat(a,"_")}},{key:"set",value:function(e,t,n,r){var o,i=3<arguments.length&&void 0!==r?r:"/",a="";h.isPresent(n)&&((o=new Date).setTime(o.getTime()+60*n*1e3),a="expires=".concat(o.toGMTString(),"; ")),u.cookie="".concat(this.prefix()).concat(e,"=").concat(t,"; ").concat(a,"path=").concat(i,"; SameSite=Lax")}},{key:"get",value:function(e){for(var e="".concat(this.prefix()).concat(e,"="),t=u.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}}},{key:"delete",value:function(e){this.set(e,"",-100)}},{key:"exists",value:function(e){return h.isPresent(this.get(e))}},{key:"setUtms",value:function(){for(var e=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],t=!1,n=0,r=e.length;n<r;n++)if(h.isPresent(v.getParameterByName(e[n]))){t=!0;break}if(t){for(var o,i={},n=0,r=e.length;n<r;n++)o=v.getParameterByName(e[n]),h.isPresent(o)&&(i[e[n]]=o);this.set("utm",JSON.stringify(i))}}},{key:"getUtm",value:function(e){if(this.exists("utm")){var t=JSON.parse(this.get("utm"));return e in t?t[e]:""}}}]),e}(),v=function(){function e(){l(this,e)}return m(e,null,[{key:"getParameterByName",value:function(e,t){t=t||o.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"externalHost",value:function(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")}}]),e}(),y=function(){function r(e,t,n){l(this,r),this.params=[],this.event=e,this.timestamp=t,this.optional=h.optionalData(n),this.buildParams(),this.send()}return m(r,[{key:"buildParams",value:function(){var e=this.getAttribute();for(var t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var e=this,t=new URL(u.location.href);return n({id:function(){return g.id},uid:function(){return p.get("uid")},ev:function(){return e.event},ed:function(){return e.optional},v:function(){return g.version},dl:function(){return o.location.href},rl:function(){return u.referrer},ts:function(){return e.timestamp},de:function(){return u.characterSet},sr:function(){return o.screen.width+"x"+o.screen.height},vp:function(){return o.innerWidth+"x"+o.innerHeight},cd:function(){return o.screen.colorDepth},dt:function(){return u.title},bn:function(){return d.nameAndVersion()},md:function(){return d.isMobile()},ua:function(){return d.userAgent()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(e){return p.getUtm(e)},utm_medium:function(e){return p.getUtm(e)},utm_term:function(e){return p.getUtm(e)},utm_content:function(e){return p.getUtm(e)},utm_campaign:function(e){return p.getUtm(e)},host:function(){return t.hostname},path:function(){return t.pathname}},g.params)}},{key:"setParam",value:function(e,t){h.isPresent(t)?this.params.push("".concat(e,"=").concat(encodeURIComponent(t))):this.params.push("".concat(e,"="))}},{key:"send",value:function(){o.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){o.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=u.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",u.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://events.allroadsanalytics.com/event.gif","?").concat(this.params.join("&"))}}]),r}(),b=h.guid();p.set("uid",b,1051200),p.setUtms(),i.process=function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};"init"===e?(g.id=t,g.follow=null!==(n=r.follow)&&void 0!==n?n:g.follow):"param"===e?g.params[t]=function(){return r}:"event"===e&&("pageload"!==t||g.pageLoadOnce?"pageload"!==t&&"pageclose"!==t&&new y(t,h.now(),r):(g.pageLoadOnce=!0,new y(t,i.t,r)))};for(var e=0,w=i.queue.length;e<w;e++)i.process.apply(i,i.queue[e]);var x="object"===("undefined"==typeof safari?"undefined":r(safari))&&safari.pushNotification,P="onpageshow"in self&&!x?"pagehide":"unload";o.addEventListener(P,function(){g.pageCloseOnce||(g.pageCloseOnce=!0,new y("pageclose",h.now(),function(){if(h.isPresent(g.externalHost)&&h.now()-g.externalHost.time<5e3)return g.externalHost.link}))}),o.onload=function(){var e,t=c(u.querySelectorAll("a"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.addEventListener("click",function(e){v.externalHost(this)&&(g.externalHost={link:this.href,time:h.now()},h.addFollowParam(this))}.bind(n)),n.addEventListener("auxclick",function(e){v.externalHost(this)&&h.addFollowParam(this)}.bind(n))}}catch(e){t.e(e)}finally{t.f()}for(var r=u.querySelectorAll("[data-allroads-event]"),o=0,i=r.length;o<i;o++)r[o].addEventListener("click",function(e){var t=this.getAttribute("data-allroads-event");t&&new y(t,h.now(),this.getAttribute("data-allroads-data"))}.bind(r[o]))}}(window,document,window.allroads,"allroads");