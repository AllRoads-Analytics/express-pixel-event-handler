// AllRoads Analytics (allroadsanalytics.com)
!function(o,u,i,s){"use strict";var e,t,n;function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function r(t,e){var n,r=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)),r}function l(o){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){var t,n,r;t=o,r=i[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(o,e,Object.getOwnPropertyDescriptor(i,e))})}return o}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}var h={id:"",params:{},version:2,follow:!1},p=function(){function t(){m(this,t)}return g(t,null,[{key:"isPresent",value:function(e){return null!=e&&""!==e}},{key:"now",value:function(){return+new Date}},{key:"addMinutesToDate",value:function(e,t){e.setTime(e.getTime()+1e3*t*60)}},{key:"randomId",value:function(){return h.version+"-xxxxxxxx-".replace(/[x]/g,function(e){var t=36*Math.random()|0;return("x"==e?t:3&t|8).toString(36)})+(+new Date).toString(36)}},{key:"guid",value:function(){var e=e||(y.exists("uid")?y.get("uid"):t.randomId());return e}},{key:"sid",value:function(){var e;return e=e||(y.exists("sid")?y.get("sid"):t.randomId()),e}},{key:"optionalData",value:function(e){return!1===t.isPresent(e)?"":"object"===f(e)?t.optionalData(JSON.stringify(e)):"function"==typeof e?t.optionalData(e()):String(e)}},{key:"addFollowParam",value:function(e){if(h.follow)try{var t=new URL(e.href);t.searchParams.set(s+"_follow",O+"."+x+"."+btoa(JSON.stringify({utms:y.getUtms()}))+"."+(new Date).getTime()),e.href=t.href}catch(e){console.log(e)}}}]),t}(),v=function(){function e(){m(this,e)}return g(e,null,[{key:"nameAndVersion",value:function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}},{key:"isMobile",value:function(){return"ontouchstart"in o||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints}},{key:"userAgent",value:function(){return o.navigator.userAgent}}]),e}(),y=function(){function a(){m(this,a)}return g(a,null,[{key:"prefix",value:function(){return"__".concat(s,"_")}},{key:"set",value:function(e,t,n,r){var o,i=3<arguments.length&&void 0!==r?r:"/",a="";p.isPresent(n)&&((o=new Date).setTime(o.getTime()+60*n*1e3),a="expires=".concat(o.toGMTString(),"; ")),u.cookie="".concat(this.prefix()).concat(e,"=").concat(t,"; ").concat(a,"path=").concat(i,"; SameSite=Lax")}},{key:"get",value:function(e){for(var e="".concat(this.prefix()).concat(e,"="),t=u.cookie.split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(e))return r.substring(e.length,r.length)}}},{key:"delete",value:function(e){this.set(e,"",-100)}},{key:"exists",value:function(e){return p.isPresent(this.get(e))}},{key:"getUtm",value:function(e){if(this.exists("utm")){var t=JSON.parse(this.get("utm"));return e in t?t[e]:""}}},{key:"getUtms",value:function(){for(var e={},t=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],n=0,r=t.length;n<r;n++){var o=t[n],i=a.getUtm(o);i&&(e[o]=i)}return e}}]),a}(),b=function(){function a(){m(this,a)}return g(a,null,[{key:"getParameterByName",value:function(e,t){t=t||o.location.href,e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)","i").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"externalHost",value:function(e){return e.hostname!=location.hostname&&0===e.protocol.indexOf("http")}},{key:"getUtms",value:function(){for(var e=["utm_source","utm_medium","utm_term","utm_content","utm_campaign"],t=!1,n={},r=0,o=e.length;r<o;r++)if(p.isPresent(a.getParameterByName(e[r]))){t=!0;break}if(t)for(var i,r=0,o=e.length;r<o;r++)i=a.getParameterByName(e[r]),p.isPresent(i)&&(n[e[r]]=i);return n}}]),a}(),w=function(){function r(e,t,n){m(this,r),this.params=[],this.event=e,this.timestamp=t,this.optional=p.optionalData(n),this.buildParams(),this.send()}return g(r,[{key:"buildParams",value:function(){var e=this.getAttribute();for(var t in e)e.hasOwnProperty(t)&&this.setParam(t,e[t](t))}},{key:"getAttribute",value:function(){var e=this,t=new URL(u.location.href);return l({id:function(){return h.id},uid:function(){return y.get("uid")},ev:function(){return e.event},ed:function(){return e.optional},v:function(){return h.version},dl:function(){return o.location.href},rl:function(){return u.referrer},ts:function(){return e.timestamp},de:function(){return u.characterSet},sr:function(){return o.screen.width+"x"+o.screen.height},vp:function(){return o.innerWidth+"x"+o.innerHeight},cd:function(){return o.screen.colorDepth},dt:function(){return u.title},bn:function(){return v.nameAndVersion()},md:function(){return v.isMobile()},ua:function(){return v.userAgent()},tz:function(){return(new Date).getTimezoneOffset()},utm_source:function(e){return y.getUtm(e)},utm_medium:function(e){return y.getUtm(e)},utm_term:function(e){return y.getUtm(e)},utm_content:function(e){return y.getUtm(e)},utm_campaign:function(e){return y.getUtm(e)},host:function(){return t.hostname},path:function(){return t.pathname},sid:function(){return y.get("sid")}},h.params)}},{key:"setParam",value:function(e,t){p.isPresent(t)?this.params.push("".concat(e,"=").concat(encodeURIComponent(t))):this.params.push("".concat(e,"="))}},{key:"send",value:function(){o.navigator.sendBeacon?this.sendBeacon():this.sendImage()}},{key:"sendBeacon",value:function(){o.navigator.sendBeacon(this.getSourceUrl())}},{key:"sendImage",value:function(){this.img=u.createElement("img"),this.img.src=this.getSourceUrl(),this.img.style.display="none",this.img.width="1",this.img.height="1",u.getElementsByTagName("body")[0].appendChild(this.img)}},{key:"getSourceUrl",value:function(){return"".concat("https://events.allroadsanalytics.com/event.gif","?").concat(this.params.join("&"))}}]),r}(),k=function(){function e(){m(this,e)}return g(e,null,[{key:"getValuesFromUrl",value:function(){var e=b.getParameterByName(s+"_follow");try{if(p.isPresent(e)){var t=e.split(".");if(4===t.length){var n=new Date,r=new Date(parseInt(t[3]));r.setTime(r.getTime()+1e4);var o=t[0],i=t[1],a=JSON.parse(atob(t[2]));if(!isNaN(r.getTime())&&n.getTime()<r.getTime()&&"string"==typeof o&&o.length<30&&"string"==typeof i&&i.length<30&&"object"===f(a))return{uid:o,sid:i,params:a}}else console.error("Invalid allroads_follow param (length)")}}catch(e){console.error(e)}return{}}}]),e}().getValuesFromUrl(),O=null!==(e=k.uid)&&void 0!==e?e:p.guid(),x=null!==(t=k.sid)&&void 0!==t?t:p.sid();y.set("uid",O,1051200),y.set("sid",x);var P=void 0!==k.params&&null!==(n=k.params.utms)&&void 0!==n?n:{};Object.keys(P).length||(P=b.getUtms()),Object.keys(P).length&&y.set("utm",JSON.stringify(P)),i.process=function(e,t){var n,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};"init"===e?(h.id=t,h.follow=null!==(n=r.follow)&&void 0!==n?n:h.follow):"param"===e?h.params[t]=function(){return r}:"event"===e&&("pageload"!==t||h.pageLoadOnce?"pageload"!==t&&"pageclose"!==t&&new w(t,p.now(),r):(h.pageLoadOnce=!0,new w(t,i.t,r)))};for(var S=0,j=i.queue.length;S<j;S++)i.process.apply(i,i.queue[S]);var U="object"===("undefined"==typeof safari?"undefined":f(safari))&&safari.pushNotification,_="onpageshow"in self&&!U?"pagehide":"unload";o.addEventListener(_,function(){h.pageCloseOnce||(h.pageCloseOnce=!0,new w("pageclose",p.now(),function(){if(p.isPresent(h.externalHost)&&p.now()-h.externalHost.time<5e3)return h.externalHost.link}))}),o.onload=function(){var e,t=a(u.querySelectorAll("a"));try{for(t.s();!(e=t.n()).done;){var n=e.value;n.addEventListener("click",function(e){b.externalHost(this)&&(h.externalHost={link:this.href,time:p.now()},p.addFollowParam(this))}.bind(n)),n.addEventListener("auxclick",function(e){b.externalHost(this)&&p.addFollowParam(this)}.bind(n))}}catch(e){t.e(e)}finally{t.f()}for(var r=u.querySelectorAll("[data-allroads-event]"),o=0,i=r.length;o<i;o++)r[o].addEventListener("click",function(e){var t=this.getAttribute("data-allroads-event");t&&new w(t,p.now(),this.getAttribute("data-allroads-data"))}.bind(r[o]))}}(window,document,window.allroads,"allroads");